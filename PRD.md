# AI Canvas - 产品需求文档

## 一、产品愿景

**一句话描述：** 一个自由画布 + AI 原生集成的研究工具，让你像在桌面上摊开资料一样研究任何主题。

**核心价值：** AI 能"看"到你整个画布的内容和空间关系，像一个能纵观全局的研究伙伴。

---

## 二、目标用户 & 使用场景

### 目标用户
- 需要深度研究某个主题的学习者/创作者
- 经常看视频、文章，需要做笔记和发散思考
- 对 Milanote、Miro 等画布工具有使用经验

### 核心场景
> 我在研究一个主题，看了一个视频，里面提到了一本书、一个人物、一个历史事件。
> 我需要把视频内容记录下来，同时去查这些相关资料，然后放在同一个画布上。
> 最后我想问 AI：这些内容之间有什么关联？帮我梳理一下。

---

## 三、功能需求

### 第一层：画布基础能力
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 自由定位 | 卡片可以放在画布任意位置 | P0 |
| 卡片类型 | 支持：文本笔记、视频链接、文章链接、图片 | P0 |
| 拖拽移动 | 卡片可自由拖动 | P0 |
| 缩放漫游 | 画布可缩放、平移 | P0 |
| 连接线 | 卡片之间可以画连接线（表示关联） | P1 |
| 分组 | 多个卡片可以分组 | P2 |

### 第二层：内容处理能力
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 视频链接卡片 | 粘贴 YouTube/B站链接，自动获取标题和缩略图 | P0 |
| 视频转录 | 调用转录服务，把视频内容变成文字 | P0 |
| 文章链接卡片 | 粘贴文章链接，自动获取标题和摘要 | P1 |
| 手写笔记 | 在卡片上自由书写想法 | P0 |

### 第三层：AI 集成能力
| 功能 | 描述 | 优先级 |
|------|------|--------|
| AI 对话面板 | 侧边栏对话框，可以和 AI 交流 | P0 |
| 全局上下文 | AI 能读取整个画布的所有卡片内容 + 位置关系 | P0 |
| 单卡片聚焦 | 选中某个卡片时，AI 以它为重点但仍了解全局 | P1 |
| AI 回复落地 | AI 的回答可以直接变成新卡片放到画布上 | P1 |
| 智能关联建议 | AI 主动建议"这两个卡片可能有关联" | P2 |

---

## 四、技术选型（初步）

| 模块 | 选择 | 理由 |
|------|------|------|
| 画布引擎 | tldraw | 开源、React、交互体验好、有现成的卡片系统 |
| 前端框架 | React + TypeScript | tldraw 原生支持 |
| AI API | Claude API (Anthropic) | 长上下文能力强，适合理解复杂画布 |
| 视频转录 | Whisper API / 本地 Whisper | 开源、效果好 |
| 数据存储 | 本地 JSON 文件（MVP）→ 后续可加云端 | 先简单跑通 |

---

## 五、MVP 定义（最小可行版本）

**目标：** 2-3 天内能跑起来，验证"AI 理解画布上下文"这个核心假设。

### MVP 功能清单
1. ✅ 基于 tldraw 的自由画布
2. ✅ 支持创建文本卡片（手动输入笔记）
3. ✅ 支持创建视频链接卡片（粘贴链接，显示标题）
4. ✅ 侧边 AI 对话面板
5. ✅ 发送消息时，自动把画布所有卡片内容 + 位置信息序列化后发给 Claude
6. ✅ AI 回复显示在对话面板

### MVP 不做
- ❌ 视频自动转录（手动粘贴转录文字）
- ❌ 文章自动抓取
- ❌ 连接线
- ❌ 分组
- ❌ 云端存储
- ❌ AI 回复变卡片

---

## 六、迭代计划

### Phase 1: MVP（本周）
- 搭建 tldraw 画布
- 实现文本卡片、视频链接卡片
- 接入 Claude API 对话
- 画布内容序列化 → AI 上下文

### Phase 2: 内容增强（下周）
- 视频转录集成（Whisper）
- 文章链接自动摘要
- 连接线功能

### Phase 3: AI 深度集成
- AI 回复可落地为卡片
- 选中卡片聚焦对话
- 智能关联建议

### Phase 4: 体验优化
- 数据持久化（本地保存/云端同步）
- 移动端适配
- 多画布管理

---

## 七、成功指标

MVP 阶段的验证问题：
1. **AI 能理解空间关系吗？** — 问"左边那个视频讲了什么"，AI 能正确回答
2. **全局上下文有用吗？** — 问"这些内容之间有什么关联"，AI 能给出有价值的分析
3. **你会继续用吗？** — 真实研究任务中，这个工具比"Milanote + 单独问 Claude"更顺手

---

## 八、风险 & 待确认

| 风险 | 应对 |
|------|------|
| tldraw 自定义卡片复杂度 | 先用最简单的 shape，验证后再优化 |
| Claude 上下文长度限制 | 画布内容多时需要做摘要/筛选 |
| 视频转录成本 | MVP 先手动粘贴，后续再接 Whisper |

---

## 九、附录：用户原始需求摘要

> 1. 所有信息汇总和调研都在一个画布里完成，包括和 AI 交流
> 2. 操作要足够自由，不需要拖拽选择特定格式，可以随意发挥
> 3. 整体功能由模型驱动，AI 能对页面内所有信息进行汇总、整理、讨论和分析
> 4. 所有信息留在一个页面完成，像一张桌子，心智保持在一个空间里
