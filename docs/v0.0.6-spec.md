# v0.0.6 ç‰ˆæœ¬è¯´æ˜

> Canvas â†’ Logseq å•å‘åŒæ­¥

## ç›®æ ‡

ä¿å­˜ç”»å¸ƒæ—¶ï¼ŒåŒæ­¥ç”Ÿæˆ Logseq é¡µé¢ã€‚æ”¯æŒå¢é‡æ›´æ–°ï¼Œä¸è¦†ç›–ç”¨æˆ·åœ¨ Logseq é‡Œæ‰‹åŠ¨æ·»åŠ çš„ç¬”è®°ã€‚

## æ ¸å¿ƒè®¾è®¡

### åŒåŒºåˆ†ç¦»

```markdown
type:: canvas
canvas-id:: abc123-def456
updated:: [[2026-02-01]]
source:: [[AI Canvas]]

## Canvas å†…å®¹
<!-- CANVAS-START -->
ï¼ˆæ¯æ¬¡ä¿å­˜è‡ªåŠ¨è¦†ç›–ï¼‰
<!-- CANVAS-END -->

## æˆ‘çš„ç¬”è®°
ï¼ˆç”¨æˆ·è‡ªç”±ç¼–è¾‘ï¼Œæ°¸ä¸è¦†ç›–ï¼‰
```

### æ–‡ä»¶è·¯å¾„

| ä½ç½® | è·¯å¾„ |
|------|------|
| Canvas æ•°æ® | `ai-canvas/data/ä¹ æƒ¯çš„åŠ›é‡/canvas.json` |
| Canvas Markdown | `ai-canvas/data/ä¹ æƒ¯çš„åŠ›é‡/content.md` |
| Logseq é¡µé¢ | `~/Library/Mobile Documents/iCloud~com~logseq~logseq/Documents/pages/canvas___ä¹ æƒ¯çš„åŠ›é‡.md` |

### ç”»å¸ƒ ID

- æ¯ä¸ªç”»å¸ƒé¦–æ¬¡ä¿å­˜æ—¶ç”Ÿæˆå”¯ä¸€ IDï¼ˆUUIDï¼‰
- ID å­˜å‚¨åœ¨ canvas.json çš„ meta å­—æ®µ
- ç”¨äºå…³è” Canvas å’Œ Logseq æ–‡ä»¶

## ä¿å­˜æµç¨‹

```
ç”¨æˆ·ç‚¹å‡»ä¿å­˜
    â†“
è¾“å…¥ç”»å¸ƒåç§°ï¼ˆå¦‚"ä¹ æƒ¯çš„åŠ›é‡"ï¼‰
    â†“
å‰ç«¯è°ƒç”¨ POST /api/save
    â†“
åç«¯æ‰§è¡Œï¼š
  1. ä¿å­˜ ai-canvas/data/ä¹ æƒ¯çš„åŠ›é‡/canvas.json
  2. ä¿å­˜ ai-canvas/data/ä¹ æƒ¯çš„åŠ›é‡/content.md
  3. æ£€æŸ¥ Logseq æ–‡ä»¶æ˜¯å¦å­˜åœ¨
     â”œâ”€ ä¸å­˜åœ¨ â†’ åˆ›å»ºæ–°æ–‡ä»¶ï¼ˆå«ä¸¤ä¸ªåŒºå—ï¼‰
     â””â”€ å­˜åœ¨ â†’ åªæ›´æ–° CANVAS-START åˆ° CANVAS-END ä¹‹é—´å†…å®¹
    â†“
è¿”å›æˆåŠŸ
```

## API å˜æ›´

### POST /api/save

è¯·æ±‚ä½“æ–°å¢ï¼š
```json
{
  "name": "ä¹ æƒ¯çš„åŠ›é‡",
  "json": { ... },
  "markdown": "...",
  "canvasId": "abc123-def456"
}
```

å“åº”æ–°å¢ï¼š
```json
{
  "success": true,
  "path": "...",
  "canvasId": "abc123-def456",
  "logseqPath": "..."
}
```

## Logseq é¡µé¢ç¤ºä¾‹

æ–‡ä»¶åï¼š`canvas___ä¹ æƒ¯çš„åŠ›é‡.md`

```markdown
type:: canvas
canvas-id:: a1b2c3d4-e5f6-7890-abcd-ef1234567890
updated:: [[2026-02-01]]
source:: [[AI Canvas]]

## Canvas å†…å®¹
<!-- CANVAS-START -->
### æ–‡æœ¬
- ä¹ æƒ¯ = èº«ä»½è®¤åŒçš„æŠ•ç¥¨
- æ¯å¤©è¿›æ­¥ 1%ï¼Œä¸€å¹´åæå‡ 37 å€

### é“¾æ¥/è§†é¢‘
- [https://youtube.com/watch?v=xxx](https://youtube.com/watch?v=xxx)

### ç¬”è®°
- ğŸ“ çœ‹å®Œè¿™ä¸ªè§†é¢‘å¾ˆæœ‰å¯å‘
<!-- CANVAS-END -->

## æˆ‘çš„ç¬”è®°
- å…³è”ï¼š[[åŸå­ä¹ æƒ¯]]ã€[[è©¹å§†æ–¯Â·å…‹åˆ©å°”]]
- ä¸‹ä¸€æ­¥ï¼šè¯»å®Œæ•´æœ¬ä¹¦
- TODO å†™ä¸€ç¯‡è¯»ä¹¦ç¬”è®°
```

## æ”¹åŠ¨æ–‡ä»¶

| æ–‡ä»¶ | å˜æ›´ |
|------|------|
| vite.config.ts | å¢åŠ  Logseq å†™å…¥é€»è¾‘ï¼ˆæ›´æ–°/æ–°å»ºåˆ¤æ–­ï¼‰ |
| src/utils/storage.ts | å¢åŠ  canvasId å¤„ç† |
| src/App.tsx | ä¿å­˜æ—¶ä¼ é€’/æ¥æ”¶ canvasId |
| ai-canvas/data/*/canvas.json | æ–°å¢ meta.canvasId å­—æ®µ |

## é…ç½®

Logseq è·¯å¾„ï¼š
```
~/Library/Mobile Documents/iCloud~com~logseq~logseq/Documents/pages/
```

## éªŒæ”¶æ ‡å‡†

1. âœ… é¦–æ¬¡ä¿å­˜ç”»å¸ƒ â†’ Logseq å‡ºç° `canvas___ä¸»é¢˜å.md`
2. âœ… æ–‡ä»¶åŒ…å«å±æ€§ï¼ˆtype, canvas-id, updated, sourceï¼‰
3. âœ… æ–‡ä»¶åŒ…å«ä¸¤ä¸ªåŒºå—ï¼ˆCanvas å†…å®¹ + æˆ‘çš„ç¬”è®°ï¼‰
4. âœ… åœ¨ Logseq æ‰‹åŠ¨æ·»åŠ å†…å®¹åˆ°"æˆ‘çš„ç¬”è®°"
5. âœ… Canvas å†æ¬¡ä¿å­˜ â†’ "æˆ‘çš„ç¬”è®°"å†…å®¹ä¿ç•™
6. âœ… Canvas å†…å®¹æ›´æ–° â†’ "Canvas å†…å®¹"åŒºå—æ›´æ–°
7. âœ… Logseq é‡Œ `[[AI Canvas]]` åŒé“¾å¯ç‚¹å‡»

## é£é™©

| é£é™© | åº”å¯¹ |
|------|------|
| iCloud åŒæ­¥å»¶è¿Ÿ | ç”¨æˆ·éœ€ç­‰å¾…å‡ ç§’è®© iCloud åŒæ­¥ |
| æ–‡ä»¶åç‰¹æ®Šå­—ç¬¦ | è¿‡æ»¤æ‰ç‰¹æ®Šå­—ç¬¦ |
| Logseq æœªæ‰“å¼€æ—¶ç¼–è¾‘ | æ— å½±å“ï¼Œæ–‡ä»¶çº§æ“ä½œ |
